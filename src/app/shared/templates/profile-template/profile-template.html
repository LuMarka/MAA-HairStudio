<section class="profile-template">
  <div class="profile-template__container">
    <h1 class="profile-template__title">Mi Perfil</h1>

    @if (errorMessage()) {
      <div class="profile-template__error">{{ errorMessage() }}</div>
    }

    @if (isLoading()) {
      <div class="profile-template__loading">Cargando...</div>
    }

    @if (userProfile()) {
      <form [formGroup]="form()" (ngSubmit)="saveChanges()" class="profile-template__form">
        <div>
          <label>Nombre</label>
           <input id="profile-name" class="profile-template__input" type="text" formControlName="name" placeholder="Nombre Apellido" [disabled]="!isEditing()" />
        </div>
        <div>
          <label>Email</label>
           <input id="profile-email" class="profile-template__input" type="email" formControlName="email" placeholder="usuario@email.com" [disabled]="!isEditing()" />
        </div>
        <div>
          <label>Teléfono</label>
           <input id="profile-phone" class="profile-template__input" type="tel" formControlName="phone" placeholder="1234567890" [disabled]="!isEditing()" />
        </div>
        <div>
          <label>Dirección</label>
           <input id="profile-address1" class="profile-template__input" type="text" formControlName="address" placeholder="Calle Falsa 123, Villa María, Córdoba, Argentina" [disabled]="!isEditing()" />
        </div>
        <div>
          <label>Dirección 2</label>
          <input formControlName="address2" [readonly]="!isEditing()" />
        </div>

        @if (isEditing()) {
          <button type="submit" [disabled]="form().invalid || isLoading()">Guardar cambios</button>
          <button type="button" (click)="toggleEdit()">Cancelar</button>
        } @else {
          <button type="button" (click)="toggleEdit()">Editar perfil</button>
        }
        <button type="button" class="profile-template__delete-btn" (click)="deleteAccount()">Eliminar cuenta</button>
      </form>
    }
  </div>
</section>
