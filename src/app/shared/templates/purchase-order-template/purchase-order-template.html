<div class="purchase-order">
  <!-- Step Indicator -->
  <div class="purchase-order__header">
    <div class="container">
      <h1 class="purchase-order__main-title">Finalizar Pedido</h1>
      <p class="purchase-order__subtitle">Completa tu informaci√≥n para procesar tu pedido</p>

      <div class="steps-indicator">
        <div class="step" [class.active]="currentStep() >= 1" [class.completed]="currentStep() > 1">
          <div class="step__circle">
            <span class="step__number">1</span>
            @if (currentStep() > 1) {
              <span class="step__check">‚úì</span>
            }
          </div>
          <div class="step__content">
            <span class="step__title">Datos</span>
            <span class="step__subtitle">Informaci√≥n personal</span>
          </div>
        </div>

        <div class="step__separator"></div>

        <div class="step" [class.active]="currentStep() >= 2" [class.completed]="currentStep() > 2">
          <div class="step__circle">
            <span class="step__number">2</span>
            @if (currentStep() > 2) {
              <span class="step__check">‚úì</span>
            }
          </div>
          <div class="step__content">
            <span class="step__title">M√©todo de Pago</span>
            <span class="step__subtitle">Selecciona tu opci√≥n</span>
          </div>
        </div>

        <div class="step__separator"></div>

        <div class="step" [class.active]="currentStep() >= 3">
          <div class="step__circle">
            <span class="step__number">3</span>
          </div>
          <div class="step__content">
            <span class="step__title">Confirmaci√≥n</span>
            <span class="step__subtitle">Revisar y confirmar</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 1: Personal Data Form -->
  @if (currentStep() === 1) {
    <div class="purchase-order__content">
      <div class="container">
        <div class="form-layout">
          <!-- Datos de la persona - Columna izquierda (m√°s ancha) -->
          <div class="customer-form-section">
            <div class="form-header">
              <h2 class="form-title">Informaci√≥n de Contacto y Entrega</h2>
              <div class="delivery-badge">
                <span class="delivery-badge__icon">
                  @if (selectedDeliveryOption() === 'pickup') {
                    üè™
                  } @else {
                    üöö
                  }
                </span>
                <span class="delivery-badge__text">{{ deliveryOptionText() }}</span>
              </div>
            </div>

            <form [formGroup]="orderForm" (ngSubmit)="onNextStep()" class="purchase-form" novalidate>
              <!-- Informaci√≥n Personal -->
              <div class="form-section">
                <div class="form-section__header">
                  <h3 class="form-section__title">
                    <span class="form-section__icon">üë§</span>
                    Informaci√≥n Personal
                  </h3>
                  <p class="form-section__description">Datos necesarios para contactarte</p>
                </div>

                <div class="form-grid">
                  <div class="form-group">
                    <label for="firstName" class="form-label">
                      Nombre <span class="required">*</span>
                    </label>
                    <div class="form-input-wrapper">
                      <input
                        type="text"
                        id="firstName"
                        formControlName="firstName"
                        class="form-control"
                        [class.form-control--error]="isFieldInvalid('firstName')"
                        placeholder="Ingresa tu nombre">
                      @if (isFieldInvalid('firstName')) {
                        <span class="form-error">
                          <span class="form-error__icon">‚ö†Ô∏è</span>
                          {{ getFieldError('firstName') }}
                        </span>
                      }
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="lastName" class="form-label">
                      Apellido <span class="required">*</span>
                    </label>
                    <div class="form-input-wrapper">
                      <input
                        type="text"
                        id="lastName"
                        formControlName="lastName"
                        class="form-control"
                        [class.form-control--error]="isFieldInvalid('lastName')"
                        placeholder="Ingresa tu apellido">
                      @if (isFieldInvalid('lastName')) {
                        <span class="form-error">
                          <span class="form-error__icon">‚ö†Ô∏è</span>
                          {{ getFieldError('lastName') }}
                        </span>
                      }
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="email" class="form-label">
                      Correo Electr√≥nico <span class="required">*</span>
                    </label>
                    <div class="form-input-wrapper">
                      <input
                        type="email"
                        id="email"
                        formControlName="email"
                        class="form-control"
                        [class.form-control--error]="isFieldInvalid('email')"
                        placeholder="ejemplo@correo.com">
                      @if (isFieldInvalid('email')) {
                        <span class="form-error">
                          <span class="form-error__icon">‚ö†Ô∏è</span>
                          {{ getFieldError('email') }}
                        </span>
                      }
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="phone" class="form-label">
                      Tel√©fono <span class="required">*</span>
                    </label>
                    <div class="form-input-wrapper">
                      <input
                        type="tel"
                        id="phone"
                        formControlName="phone"
                        class="form-control"
                        [class.form-control--error]="isFieldInvalid('phone')"
                        placeholder="+54 9 11 1234-5678">
                      @if (isFieldInvalid('phone')) {
                        <span class="form-error">
                          <span class="form-error__icon">‚ö†Ô∏è</span>
                          {{ getFieldError('phone') }}
                        </span>
                      }
                    </div>
                  </div>
                </div>
              </div>

              <!-- Direcci√≥n de entrega (solo para delivery) -->
              @if (selectedDeliveryOption() === 'delivery') {
                <div class="form-section">
                  <div class="form-section__header">
                    <h3 class="form-section__title">
                      <span class="form-section__icon">üöö</span>
                      Direcci√≥n de Entrega
                    </h3>
                    <p class="form-section__description">¬øD√≥nde quieres recibir tu pedido?</p>
                  </div>

                  <div class="form-grid">
                    <div class="form-group form-group--full">
                      <label for="address" class="form-label">
                        Direcci√≥n Completa <span class="required">*</span>
                      </label>
                      <div class="form-input-wrapper">
                        <input
                          type="text"
                          id="address"
                          formControlName="address"
                          class="form-control"
                          [class.form-control--error]="isFieldInvalid('address')"
                          placeholder="Calle, n√∫mero, piso, departamento">
                        @if (isFieldInvalid('address')) {
                          <span class="form-error">
                            <span class="form-error__icon">‚ö†Ô∏è</span>
                            {{ getFieldError('address') }}
                          </span>
                        }
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="city" class="form-label">
                        Ciudad <span class="required">*</span>
                      </label>
                      <div class="form-input-wrapper">
                        <input
                          type="text"
                          id="city"
                          formControlName="city"
                          class="form-control"
                          [class.form-control--error]="isFieldInvalid('city')"
                          placeholder="Ciudad">
                        @if (isFieldInvalid('city')) {
                          <span class="form-error">
                            <span class="form-error__icon">‚ö†Ô∏è</span>
                            {{ getFieldError('city') }}
                          </span>
                        }
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="postalCode" class="form-label">C√≥digo Postal</label>
                      <div class="form-input-wrapper">
                        <input
                          type="text"
                          id="postalCode"
                          formControlName="postalCode"
                          class="form-control"
                          placeholder="1234">
                      </div>
                    </div>
                  </div>
                </div>
              }

              <!-- Informaci√≥n Adicional -->
              <div class="form-section">
                <div class="form-section__header">
                  <h3 class="form-section__title">
                    <span class="form-section__icon">üìù</span>
                    Informaci√≥n Adicional
                  </h3>
                  <p class="form-section__description">
                    @if (selectedDeliveryOption() === 'delivery') {
                      Incluye horarios preferidos para la entrega, referencias del domicilio, etc.
                    } @else {
                      Incluye horarios preferidos para el retiro, comentarios especiales, etc.
                    }
                  </p>
                </div>

                <div class="form-group form-group--full">
                  <label for="notes" class="form-label">Notas del Pedido</label>
                  <div class="form-input-wrapper">
                    <textarea
                      id="notes"
                      formControlName="notes"
                      class="form-control form-control--textarea"
                      rows="4"
                      placeholder="Comentarios especiales, instrucciones de entrega, horarios de preferencia, etc."></textarea>
                  </div>
                </div>
              </div>

              <!-- Botones de navegaci√≥n -->
              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn--secondary"
                  (click)="onEditCart()">
                  <span class="btn__icon">‚Üê</span>
                  <span class="btn__text">Editar Carrito</span>
                </button>

                <button
                  type="submit"
                  class="btn btn--primary"
                  [disabled]="!isStep1Valid()">
                  <span class="btn__text">Continuar</span>
                  <span class="btn__icon">‚Üí</span>
                </button>
              </div>
            </form>
          </div>

          <!-- Resumen del carrito - Columna derecha -->
          <div class="order-sidebar">
            <div class="order-summary-card">
              <h3 class="summary-title">Resumen del Pedido</h3>

              <div class="summary-section">
                <h4 class="summary-subtitle">Productos ({{ cartItems().length }})</h4>
                <div class="summary-items">
                  @for (item of cartItems(); track item.id) {
                    <div class="summary-item">
                      <div class="item-details">
                        <span class="item-name">{{ item.name }}</span>
                        @if (item.brand) {
                          <span class="item-brand">{{ item.brand }}</span>
                        }
                      </div>
                      <div class="item-quantity">x{{ item.quantity }}</div>
                      <div class="item-price">${{ (item.price * item.quantity).toFixed(2) }}</div>
                    </div>
                  }
                </div>
              </div>

              <div class="summary-totals">
                <div class="total-row">
                  <span>Subtotal:</span>
                  <span>${{ cartTotal().toFixed(2) }}</span>
                </div>
                <div class="total-row">
                  <span>Env√≠o:</span>
                  <span>
                    @if (selectedDeliveryOption() === 'pickup') {
                      Gratis
                    } @else {
                      A convenir
                    }
                  </span>
                </div>
                <div class="total-row">
                  <span>IVA (21%):</span>
                  <span>${{ (cartTotal() * 0.21).toFixed(2) }}</span>
                </div>
                <div class="total-row total-row--final">
                  <span>Total:</span>
                  <span>${{ (cartTotal() * 1.21).toFixed(2) }}</span>
                </div>
              </div>

              <div class="delivery-info">
                <div class="delivery-info__item">
                  <span class="delivery-info__label">Modalidad:</span>
                  <span class="delivery-info__value">{{ deliveryOptionText() }}</span>
                </div>
                @if (selectedDeliveryOption() === 'delivery') {
                  <div class="delivery-info__item">
                    <span class="delivery-info__label">Tiempo estimado:</span>
                    <span class="delivery-info__value">3-5 d√≠as h√°biles</span>
                  </div>
                } @else {
                  <div class="delivery-info__item">
                    <span class="delivery-info__label">Disponible:</span>
                    <span class="delivery-info__value">Lunes a Viernes</span>
                  </div>
                }
              </div>

              <!-- Validation status -->
              <div class="validation-status">
                @if (isStep1Valid()) {
                  <div class="validation-status__success">
                    <span class="validation-status__icon">‚úÖ</span>
                    <span class="validation-status__text">Informaci√≥n completa</span>
                  </div>
                } @else {
                  <div class="validation-status__pending">
                    <span class="validation-status__icon">‚ö†Ô∏è</span>
                    <span class="validation-status__text">
                      @if (selectedDeliveryOption() === 'delivery') {
                        Completa nombre, email, tel√©fono, direcci√≥n y ciudad
                      } @else {
                        Completa nombre, email y tel√©fono
                      }
                    </span>
                  </div>
                }
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Step 2: Payment Method -->
  @if (currentStep() === 2) {
    <div class="purchase-order__content">
      <div class="container">
        <div class="step-content">
          <h2 class="step-title">M√©todo de Pago</h2>
          <p class="step-subtitle">Selecciona c√≥mo quieres pagar tu pedido</p>

          <!-- M√©todos de pago -->
          <div class="payment-methods-section">
            <h3 class="section-title">
              <span class="section-icon">üí≥</span>
              Opciones de Pago
            </h3>
            <div class="payment-methods">
              <label class="payment-option" [class.payment-option--selected]="selectedPaymentMethod() === 'cash'">
                <input
                  type="radio"
                  name="paymentMethod"
                  value="cash"
                  (change)="onPaymentMethodChange('cash')"
                  class="payment-option__input">
                <div class="payment-option__card">
                  <span class="payment-option__icon">üíµ</span>
                  <div class="payment-option__content">
                    <strong class="payment-option__title">Efectivo</strong>
                    <span class="payment-option__subtitle">
                      @if (selectedDeliveryOption() === 'delivery') {
                        Paga al momento de la entrega
                      } @else {
                        Paga al momento del retiro
                      }
                    </span>
                  </div>
                  <div class="payment-option__check">‚úì</div>
                </div>
              </label>

              <label class="payment-option" [class.payment-option--selected]="selectedPaymentMethod() === 'transfer'">
                <input
                  type="radio"
                  name="paymentMethod"
                  value="transfer"
                  (change)="onPaymentMethodChange('transfer')"
                  class="payment-option__input">
                <div class="payment-option__card">
                  <span class="payment-option__icon">üè¶</span>
                  <div class="payment-option__content">
                    <strong class="payment-option__title">Transferencia bancaria</strong>
                    <span class="payment-option__subtitle">Te enviaremos los datos bancarios</span>
                  </div>
                  <div class="payment-option__check">‚úì</div>
                </div>
              </label>

              <label class="payment-option" [class.payment-option--selected]="selectedPaymentMethod() === 'mercadopago'">
                <input
                  type="radio"
                  name="paymentMethod"
                  value="mercadopago"
                  (change)="onPaymentMethodChange('mercadopago')"
                  class="payment-option__input">
                <div class="payment-option__card">
                  <span class="payment-option__icon">üí≥</span>
                  <div class="payment-option__content">
                    <strong class="payment-option__title">Mercado Pago</strong>
                    <span class="payment-option__subtitle">Pago online seguro</span>
                  </div>
                  <div class="payment-option__check">‚úì</div>
                </div>
              </label>

              <label class="payment-option" [class.payment-option--selected]="selectedPaymentMethod() === 'mercadopago-card'">
                <input
                  type="radio"
                  name="paymentMethod"
                  value="mercadopago-card"
                  (change)="onPaymentMethodChange('mercadopago-card')"
                  class="payment-option__input">
                <div class="payment-option__card">
                  <span class="payment-option__icon">üí≥</span>
                  <div class="payment-option__content">
                    <strong class="payment-option__title">Tarjeta (Mercado Pago)</strong>
                    <span class="payment-option__subtitle">Cr√©dito o d√©bito</span>
                  </div>
                  <div class="payment-option__check">‚úì</div>
                </div>
              </label>
            </div>
          </div>

          <!-- Layout para datos del cliente y resumen -->
          <div class="payment-summary-layout">
            <!-- Datos del Cliente - Columna izquierda -->
            <div class="customer-data-section">
              @if (orderData(); as data) {
                <div class="customer-summary-card">
                  <h3 class="card-title">
                    <span class="card-icon">üë§</span>
                    Datos del Cliente
                  </h3>
                  <div class="customer-data">
                    <div class="data-item">
                      <span class="data-label">Cliente:</span>
                      <span class="data-value">{{ data.firstName }} {{ data.lastName }}</span>
                    </div>
                    <div class="data-item">
                      <span class="data-label">Email:</span>
                      <span class="data-value">{{ data.email }}</span>
                    </div>
                    <div class="data-item">
                      <span class="data-label">Tel√©fono:</span>
                      <span class="data-value">{{ data.phone }}</span>
                    </div>

                    @if (data.deliveryOption === 'delivery') {
                      <div class="data-item data-item--address">
                        <span class="data-label">Direcci√≥n:</span>
                        <div class="data-value">
                          <div>{{ data.address }}</div>
                          <div>{{ data.city }}@if (data.postalCode) { ({{ data.postalCode }}) }</div>
                        </div>
                      </div>
                    } @else {
                      <div class="data-item">
                        <span class="data-label">Modalidad:</span>
                        <span class="data-value">Retiro en tienda</span>
                      </div>
                    }

                    @if (data.notes) {
                      <div class="data-item data-item--notes">
                        <span class="data-label">Notas:</span>
                        <span class="data-value">{{ data.notes }}</span>
                      </div>
                    }
                  </div>
                </div>
              }
            </div>

            <!-- Resumen de Compra - Columna derecha -->
            <div class="order-summary-section">
              <div class="order-summary-card">
                <h3 class="card-title">
                  <span class="card-icon">üõí</span>
                  Resumen de Compra
                </h3>

                <div class="order-items">
                  @for (item of cartItems(); track item.id) {
                    <div class="order-item">
                      <div class="item-info">
                        <h4 class="item-name">{{ item.name }}</h4>
                        @if (item.brand) {
                          <span class="item-brand">{{ item.brand }}</span>
                        }
                      </div>
                      <div class="item-quantity">x{{ item.quantity }}</div>
                      <div class="item-total">${{ (item.price * item.quantity).toFixed(2) }}</div>
                    </div>
                  }
                </div>

                <div class="order-totals">
                  <div class="total-line">
                    <span>Subtotal:</span>
                    <span>${{ cartTotal().toFixed(2) }}</span>
                  </div>
                  <div class="total-line">
                    <span>Env√≠o:</span>
                    <span>
                      @if (selectedDeliveryOption() === 'pickup') {
                        Gratis
                      } @else {
                        A convenir
                      }
                    </span>
                  </div>
                  <div class="total-line">
                    <span>IVA (21%):</span>
                    <span>${{ (cartTotal() * 0.21).toFixed(2) }}</span>
                  </div>
                  <div class="total-line total-line--final">
                    <span>Total:</span>
                    <span>${{ (cartTotal() * 1.21).toFixed(2) }}</span>
                  </div>
                </div>

                @if (selectedPaymentMethod()) {
                  <div class="payment-selected">
                    <div class="payment-selected__icon">üí≥</div>
                    <div class="payment-selected__content">
                      <span class="payment-selected__label">M√©todo de pago:</span>
                      <span class="payment-selected__value">{{ selectedPaymentMethodText() }}</span>
                    </div>
                  </div>
                }
              </div>
            </div>
          </div>

          <!-- Navigation buttons -->
          <div class="form-actions">
            <button
              type="button"
              class="btn btn--secondary"
              (click)="onPreviousStep()">
              <span class="btn__icon">‚Üê</span>
              <span class="btn__text">Volver</span>
            </button>

            <button
              type="button"
              class="btn btn--primary"
              [disabled]="!selectedPaymentMethod()"
              (click)="onNextStep()">
              <span class="btn__text">Continuar</span>
              <span class="btn__icon">‚Üí</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Step 3: Final Confirmation -->
  @if (currentStep() === 3) {
    <div class="purchase-order__content">
      <div class="container">
        @if (orderSent()) {
          <!-- Success Message -->
          <div class="success-container">
            <div class="success-content">
              <div class="success-icon">‚úÖ</div>
              <h2 class="success-title">¬°Gracias por tu compra!</h2>
              <p class="success-message">
                Tu pedido ha sido enviado correctamente. Nos pondremos en contacto contigo por WhatsApp muy pronto.
              </p>
              <div class="success-details">
                <div class="success-detail">
                  <span class="success-detail__icon">üì±</span>
                  <span class="success-detail__text">Mensaje enviado por WhatsApp</span>
                </div>
                <div class="success-detail">
                  <span class="success-detail__icon">‚è∞</span>
                  <span class="success-detail__text">Te contactaremos en las pr√≥ximas horas</span>
                </div>
                <div class="success-detail">
                  <span class="success-detail__icon">üöö</span>
                  <span class="success-detail__text">{{ deliveryOptionText() }}</span>
                </div>
              </div>
              <div class="success-actions">
                <button type="button" class="btn btn--primary" (click)="onBackToHome()">
                  <span class="btn__icon">üè†</span>
                  <span class="btn__text">Volver al Inicio</span>
                </button>
              </div>
              <p class="success-redirect">Ser√°s redirigido autom√°ticamente en 5 segundos...</p>
            </div>
          </div>
        } @else {
          <!-- Order Confirmation -->
          <div class="confirmation-container">
            <div class="confirmation-header">
              <h2 class="confirmation-header__title">Confirmar Pedido</h2>
              <p class="confirmation-header__subtitle">Revisa los detalles antes de finalizar tu compra</p>

              <div class="success-indicator">
                <span class="success-indicator__icon">‚úÖ</span>
                <span>Informaci√≥n verificada y lista para procesar</span>
              </div>
            </div>

            <!-- Content Grid -->
            <div class="confirmation-content">
              <!-- Customer Information -->
              <div class="confirmation-section">
                <div class="confirmation-section__header">
                  <div class="confirmation-section__icon">üë§</div>
                  <h3 class="confirmation-section__title">Informaci√≥n del Cliente</h3>
                </div>

                @if (orderData(); as data) {
                  <div class="confirmation-section__content">
                    <div class="confirmation-item">
                      <span class="confirmation-item__label">Cliente:</span>
                      <span class="confirmation-item__value">{{ data.firstName }} {{ data.lastName }}</span>
                    </div>
                    <div class="confirmation-item">
                      <span class="confirmation-item__label">Email:</span>
                      <span class="confirmation-item__value">{{ data.email }}</span>
                    </div>
                    <div class="confirmation-item">
                      <span class="confirmation-item__label">Tel√©fono:</span>
                      <span class="confirmation-item__value">{{ data.phone }}</span>
                    </div>

                    @if (data.deliveryOption === 'delivery') {
                      <div class="confirmation-item confirmation-item--address">
                        <span class="confirmation-item__label">Direcci√≥n:</span>
                        <div class="confirmation-item__value">
                          <div>{{ data.address }}</div>
                          <div>{{ data.city }}@if (data.postalCode) { ({{ data.postalCode }}) }</div>
                        </div>
                      </div>
                    } @else {
                      <div class="confirmation-item">
                        <span class="confirmation-item__label">Modalidad:</span>
                        <span class="confirmation-item__value">Retiro en tienda</span>
                      </div>
                    }

                    @if (data.notes) {
                      <div class="confirmation-item confirmation-item--notes">
                        <span class="confirmation-item__label">Notas:</span>
                        <span class="confirmation-item__value">{{ data.notes }}</span>
                      </div>
                    }
                  </div>

                  <!-- Payment Method Badge -->
                  @if (selectedPaymentMethod()) {
                    <div class="payment-method-badge">
                      <div class="payment-method-badge__icon">üí≥</div>
                      <div class="payment-method-badge__content">
                        <span class="payment-method-badge__label">M√©todo de pago</span>
                        <span class="payment-method-badge__value">{{ selectedPaymentMethodText() }}</span>
                      </div>
                    </div>
                  }
                }
              </div>

              <!-- Order Summary -->
              <div class="confirmation-section">
                <div class="confirmation-section__header">
                  <div class="confirmation-section__icon">üõí</div>
                  <h3 class="confirmation-section__title">Resumen del Pedido</h3>
                </div>

                <div class="confirmation-section__content">
                  <div class="order-items-list">
                    @for (item of cartItems(); track item.id) {
                      <div class="order-item-card">
                        <div class="order-item-card__info">
                          <h4 class="order-item-card__name">{{ item.name }}</h4>
                          @if (item.brand) {
                            <span class="order-item-card__brand">{{ item.brand }}</span>
                          }
                        </div>
                        <div class="order-item-card__quantity">x{{ item.quantity }}</div>
                        <div class="order-item-card__price">${{ (item.price * item.quantity).toFixed(2) }}</div>
                      </div>
                    }
                  </div>

                  <!-- Order totals -->
                  <div class="confirmation-item">
                    <span class="confirmation-item__label">Subtotal:</span>
                    <span class="confirmation-item__value">${{ cartTotal().toFixed(2) }}</span>
                  </div>
                  <div class="confirmation-item">
                    <span class="confirmation-item__label">Env√≠o:</span>
                    <span class="confirmation-item__value">
                      @if (selectedDeliveryOption() === 'pickup') {
                        Gratis
                      } @else {
                        A convenir
                      }
                    </span>
                  </div>
                  <div class="confirmation-item">
                    <span class="confirmation-item__label">IVA (21%):</span>
                    <span class="confirmation-item__value">${{ (cartTotal() * 0.21).toFixed(2) }}</span>
                  </div>
                  <div class="confirmation-item confirmation-item--total">
                    <span class="confirmation-item__label">Total:</span>
                    <span class="confirmation-item__value">${{ (cartTotal() * 1.21).toFixed(2) }}</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="confirmation-actions">
              <div class="confirmation-actions__secondary">
                <button type="button" class="btn btn--outline" (click)="onEditCart()">
                  <span class="btn__icon">üõí</span>
                  <span class="btn__text">Editar Carrito</span>
                </button>

                <button type="button" class="btn btn--secondary" (click)="onPreviousStep()">
                  <span class="btn__icon">‚Üê</span>
                  <span class="btn__text">Volver</span>
                </button>
              </div>

              <div class="confirmation-actions__primary">
                <button
                  type="button"
                  class="btn btn--primary btn--large"
                  [class.btn--loading]="isProcessing()"
                  [disabled]="isProcessing()"
                  (click)="onFinalizeOrder()">
                  @if (isProcessing()) {
                    <span class="btn__text">Procesando...</span>
                  } @else {
                    <span class="btn__text">Finalizar Pedido</span>
                    <span class="btn__icon">‚úÖ</span>
                  }
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  }
</div>
