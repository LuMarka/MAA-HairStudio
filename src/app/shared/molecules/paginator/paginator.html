<div class="pagination-wrapper">

  @if (showPagination()) {
  <nav class="pagination" [attr.aria-label]="'Paginación de ' + entityName()">

    <div class="pagination__info">
      <span class="pagination__summary">
        Mostrando {{ startItem() }} - {{ endItem() }} de {{ meta().total }} {{ entityName() }}
      </span>
    </div>

    <div class="pagination__controls">
      <button type="button"
              class="pagination__btn"
              [class.disabled]="!meta().hasPrevPage"
              [disabled]="!meta().hasPrevPage"
              (click)="goToPage(1)"
              aria-label="Primera página">
        <i class="icon-first-page" aria-hidden="true">⏮</i>
      </button>

      <button type="button"
              class="pagination__btn"
              [class.disabled]="!meta().hasPrevPage"
              [disabled]="!meta().hasPrevPage"
              (click)="goToPage(meta().page - 1)"
              aria-label="Página anterior">
        <i class="icon-prev-page" aria-hidden="true">◀</i>
      </button>

      <div class="pagination__numbers">
        @for (pageNum of visiblePages(); track pageNum) {
          @if (pageNum === '...') {
            <span class="pagination__ellipsis">{{ pageNum }}</span>
          } @else {
            <button type="button"
                    class="pagination__btn pagination__btn--number"
                    [class.active]="pageNum === meta().page"
                    (click)="goToPage(+pageNum)"
                    [attr.aria-label]="'Ir a página ' + pageNum"
                    [attr.aria-current]="pageNum === meta().page ? 'page' : null">
              {{ pageNum }}
            </button>
          }
        }
      </div>

      <button type="button"
              class="pagination__btn"
              [class.disabled]="!meta().hasNextPage"
              [disabled]="!meta().hasNextPage"
              (click)="goToPage(meta().page + 1)"
              aria-label="Página siguiente">
        <i class="icon-next-page" aria-hidden="true">▶</i>
      </button>

      <button type="button"
              class="pagination__btn"
              [class.disabled]="!meta().hasNextPage"
              [disabled]="!meta().hasNextPage"
              (click)="goToPage(meta().totalPages)"
              aria-label="Última página">
        <i class="icon-last-page" aria-hidden="true">⏭</i>
      </button>
    </div>

  </nav>
  }

  <div class="page-size-selector">
    <label for="page-size" class="page-size-selector__label">
      Mostrar por página:
    </label>
    <select id="page-size"
            class="page-size-selector__select"
            [value]="meta().limit"
            (change)="onPageSizeChange($event)">
      @for (size of pageSizeOptions(); track size) {
      <option [value]="size">{{ size }}</option>
      }
    </select>
  </div>

</div>
