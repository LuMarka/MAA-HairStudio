<div class="header-carousel">
  <div class="carousel-container">
    <div class="carousel-track" [style.transform]="'translateX(' + trackTransform() + '%)'">
      @for (media of mediaItems(); track $index) {
        <div class="carousel-slide" [class.active]="$index === activeIndex()">
          @if (media.type === 'image') {
            <img
              [ngSrc]="media.src"
              [alt]="media.alt"
              class="carousel-image"
              width="1200"
              height="600"
              priority
            />
          } @else {
            <video
              class="carousel-video"
              [src]="media.src"
              [poster]="media.poster"
              muted
              loop
              autoplay
              playsinline
            >
              Tu navegador no soporta videos HTML5.
            </video>
          }

          @if (media.title || media.subtitle) {
            <div class="carousel-content">
              @if (media.title) {
                <h2 class="carousel-title">{{ media.title }}</h2>
              }
              @if (media.subtitle) {
                <p class="carousel-subtitle">{{ media.subtitle }}</p>
              }
            </div>
          }
        </div>
      }
    </div>

    <button
      type="button"
      class="carousel-control prev"
      (click)="previous()"
      aria-label="Elemento anterior"
    >
      ❮
    </button>

    <button
      type="button"
      class="carousel-control next"
      (click)="next()"
      aria-label="Siguiente elemento"
    >
      ❯
    </button>
  </div>

  <div class="carousel-indicators">
    @for (media of mediaItems(); track $index) {
      <button
        type="button"
        class="indicator"
        [class.active]="$index === activeIndex()"
        (click)="goToSlide($index)"
        [attr.aria-label]="'Ir a elemento ' + ($index + 1)"
      ></button>
    }
  </div>
</div>
