

<div class="products-layout">
  <aside class="products-filter">
    <div class="products-filter__group">
      <label for="brand">Marca</label>
      <select #brandSelect id="brand" name="brand" [(ngModel)]="selectedBrand" (change)="onBrandChange(brandSelect.value)">
        <option *ngFor="let opt of brandOptions" [value]="opt.value">{{ opt.label }}</option>
      </select>
    </div>
    <div class="products-filter__group">
      <label for="sort">Ordenar por</label>
      <select #sortSelect id="sort" name="sort" [(ngModel)]="selectedSort" (change)="onSortChange(sortSelect.value)">
        <option *ngFor="let opt of sortOptions" [value]="opt.value">{{ opt.label }}</option>
      </select>
    </div>
  </aside>
  <div class="products-main">
    <!-- Filtro horizontal por tipo -->
    <nav class="products-type-filter" aria-label="Filtrar por tipo">
      @for (t of productTypes; track t.value) {
        <button
          class="products-type-filter__btn"
          [class.products-type-filter__btn--active]="selectedType === t.value"
          (click)="selectType(t.value)"
          type="button"
          [attr.aria-pressed]="selectedType === t.value"
        >
          @if (t.image) {
            <span class="products-type-filter__icon">
              <img [src]="t.image" [alt]="t.label" style="width: 28px; height: 28px; object-fit: cover; border-radius: 50%; background: #fff;" />
            </span>
          }
          <span class="products-type-filter__label">{{ t.label }}</span>
        </button>
      }
    </nav>

    <div class="products-brand-sections">
      @for (brand of brands; track brand.key) {
        @if (!selectedBrand || selectedBrand === brand.key) {
          <section class="products__brand-group">
            <h2 class="products__brand-title">{{ brand.label }}</h2>
            <div class="products">
              @for (product of filteredProductsByBrand[brand.key]; track product.id) {
                <app-product-card [product]="product"></app-product-card>
              }
            </div>
          </section>
        }
      }
    </div>
  </div>

</div>

