
<section class="auth auth--register">
	<div class="auth__card">
		<h1 class="auth__title">Crear cuenta</h1>
		@if (successMessage) {
			<div class="auth__success">
				{{ successMessage }}
				<div class="auth__actions">
					<a (click)="onLoginClick()" class="auth__link">Ir a iniciar sesiÃ³n</a>
				</div>
			</div>
		} @else {
			<form [formGroup]="form" (ngSubmit)="submit()" class="auth__form">
								<div class="auth__form-group">
					<label class="auth__label" for="name">Nombre completo</label>
					<input
						id="name"
						type="text"
						formControlName="name"
						class="auth__input"
						[class.auth__input--error]="f.name?.touched && f.name?.invalid"
						placeholder="Tu nombre completo"
					/>
					@if (f.name?.touched && f.name?.invalid) {
						<p class="auth__error">El nombre es requerido.</p>
					}
				</div>

				<div class="auth__form-group">
					<label class="auth__label" for="email">Correo electrÃ³nico</label>
					<input
						id="email"
						type="email"
						formControlName="email"
						class="auth__input"
						[class.auth__input--error]="f.email?.touched && f.email?.invalid"
						placeholder="ejemplo@correo.com"
					/>
					@if (f.email?.touched && f.email?.invalid) {
						<p class="auth__error">
							@if (f.email?.errors?.['required']) {
								<span>El correo es requerido.</span>
							}
							@if (f.email?.errors?.['email']) {
								<span>Ingresa un correo vÃ¡lido.</span>
							}
						</p>
					}
				</div>

				<div class="auth__form-group">
					<label class="auth__label" for="password">ContraseÃ±a</label>
					<div class="auth__password-wrapper">
						<input
							id="password"
							[type]="passwordVisible() ? 'text' : 'password'"
							formControlName="password"
							class="auth__input"
							[class.auth__input--error]="f.password?.touched && f.password?.invalid"
							placeholder="Al menos 6 caracteres"
						/>
						<button type="button" class="auth__toggle" (click)="togglePasswordVisibility('password')">ğŸ‘ï¸</button>
					</div>
					@if (f.password?.touched && f.password?.invalid) {
						<p class="auth__error">
							@if (f.password?.errors?.['required']) {
								<span>La contraseÃ±a es requerida.</span>
							}
							@if (f.password?.errors?.['minlength']) {
								<span>MÃ­nimo 6 caracteres.</span>
							}
						</p>
					}
				</div>

				<div class="auth__form-group">
					<label class="auth__label" for="confirm">Confirmar contraseÃ±a</label>
					<div class="auth__password-wrapper">
						<input
							id="confirm"
							[type]="confirmPasswordVisible() ? 'text' : 'password'"
							formControlName="confirm"
							class="auth__input"
							[class.auth__input--error]="f.confirm?.touched && f.confirm?.invalid || form.errors?.['passwordMismatch']"
							placeholder="Confirma tu contraseÃ±a"
						/>
						<button type="button" class="auth__toggle" (click)="togglePasswordVisibility('confirm')">ğŸ‘ï¸</button>
					</div>
					@if (f.confirm?.touched && f.confirm?.invalid) {
						<p class="auth__error">
							@if (f.confirm?.errors?.['required']) {
								<span>Confirma tu contraseÃ±a.</span>
							}
						</p>
					}
					@if (form.errors?.['passwordMismatch'] && f.confirm?.touched) {
						<p class="auth__error">Las contraseÃ±as no coinciden.</p>
					}
				</div>

				@if (error) {
					<p class="auth__server-error">{{ error }}</p>
				}

				<button class="auth__btn auth__btn--primary" type="submit" [disabled]="loading || form.invalid">
					{{ loading ? 'Procesando...' : 'Registrarse' }}
				</button>

				<p class="auth__footer">Â¿Ya tienes una cuenta? <a (click)="onLoginClick()">Inicia sesiÃ³n</a></p>
			</form>
		}
	</div>
</section>
